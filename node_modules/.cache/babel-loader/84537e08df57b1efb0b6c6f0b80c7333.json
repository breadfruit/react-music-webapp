{"ast":null,"code":"var _jsxFileName = \"/Users/macos/Desktop/react-music-webapp/src/application/Login/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { memo, useRef, useState, useEffect } from 'react';\nimport { Button, message, Modal } from 'antd';\nimport Draggable from 'react-draggable';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux'; // import { changeIsVisible } from './store'\n\nimport LoginIcon from '../../components/theme-controls-icon/login/index';\nimport { Container, LoginBottom, LoginWrapper, LoginIconWrapper } from './style'; // import ThemeLoginForm from '../../components/'\n\nimport { CSSTransition } from 'react-transition-group';\nimport imgSrc from './netease-music.png'; //实现扫码，用户名，邮箱登录\n\n/**\n * 登录页面(模态框)\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  // state/props\n  const [disabled, setDisabled] = useState(true);\n  const [loginState, setLoginState] = useState('default'); // 默认状态显示\n\n  const [bounds, setBounds] = useState({\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0\n  });\n  const draggleRef = useRef();\n  const [show, setShow] = useState(false); // redux\n\n  const dispatch = useDispatch();\n  const {\n    isVisible\n  } = useSelector(state => ({\n    isVisible: state.getIn(['loginState', 'isVisible'])\n  }), shallowEqual);\n  useEffect(() => {\n    setShow(true);\n  }, []); // 取消\n\n  const handleCancel = e => {//   // 关闭模态框\n    //   dispatch(changeIsVisible(false))\n    //   // 延迟返回初始化状态\n    //   setTimeout(() => {\n    //     setLoginState('default')\n    //   }, 100)\n  }; // 拖拽\n\n\n  const onStart = (event, uiData) => {\n    var _window, _window$document, _draggleRef$current;\n\n    console.log('---->拖拽');\n    const {\n      clientWidth,\n      clientHeight\n    } = (_window = window) === null || _window === void 0 ? void 0 : (_window$document = _window.document) === null || _window$document === void 0 ? void 0 : _window$document.documentElement;\n    const targetRect = draggleRef === null || draggleRef === void 0 ? void 0 : (_draggleRef$current = draggleRef.current) === null || _draggleRef$current === void 0 ? void 0 : _draggleRef$current.getBoundingClientRect();\n    setBounds({\n      left: -(targetRect === null || targetRect === void 0 ? void 0 : targetRect.left) + (uiData === null || uiData === void 0 ? void 0 : uiData.x),\n      right: clientWidth - ((targetRect === null || targetRect === void 0 ? void 0 : targetRect.right) - (uiData === null || uiData === void 0 ? void 0 : uiData.x)),\n      top: -(targetRect === null || targetRect === void 0 ? void 0 : targetRect.top) + (uiData === null || uiData === void 0 ? void 0 : uiData.y),\n      bottom: clientHeight - ((targetRect === null || targetRect === void 0 ? void 0 : targetRect.bottom) - (uiData === null || uiData === void 0 ? void 0 : uiData.y))\n    });\n  }; // other handle\n\n\n  const handleLogin = loginMode => {\n    switch (loginMode) {\n      case 'phone':\n        setLoginState('phone');\n        break;\n\n      case 'email':\n        setLoginState('email');\n        break;\n\n      case 'register':\n        setLoginState('register');\n        break;\n\n      default:\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(CSSTransition, {\n    in: show,\n    timeout: 300,\n    appear: true,\n    classNames: \"fly\",\n    unmountOnExit: true,\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(LoginIconWrapper, {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imgSrc,\n          style: {\n            width: '100px',\n            height: '100px'\n          },\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-bg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          shape: \"round\",\n          onClick: () => handleLogin('phone'),\n          children: \"\\u624B\\u673A\\u53F7\\u767B\\u5F55\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          shape: \"round\",\n          onClick: () => handleLogin('email'),\n          children: \"\\u7F51\\u6613\\u4E91\\u90AE\\u7BB1\\u767B\\u5F55\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          shape: \"round\",\n          onClick: () => handleLogin('qr'),\n          children: \"app\\u626B\\u7801\\u767B\\u5F55\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginBottom, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"ghost\",\n          onClick: () => handleLogin('register'),\n          shape: \"round\",\n          className: \"gap\",\n          children: \"\\u6CE8\\u518C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this); // return (\n  //   <Draggable>\n  //     <Modal\n  //       centered\n  //       footer={null}\n  //       title={\n  //         <div\n  //           style={{\n  //             width: '100%',\n  //             cursor: 'move',\n  //           }}\n  //           onMouseOver={() => {\n  //             if (disabled) {\n  //               setDisabled(false)\n  //             }\n  //           }}\n  //           onMouseOut={() => {\n  //             setDisabled(true)\n  //           }}\n  //           // fix eslintjsx-a11y/mouse-events-have-key-events\n  //           // https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/master/docs/rules/mouse-events-have-key-events.md\n  //           onFocus={() => {}}\n  //           onBlur={() => {}}\n  //           // end\n  //         >\n  //           {loginState === 'register' ? '注册' : '登录'}\n  //         </div>\n  //       }\n  //       visible={isVisible}\n  //       onCancel={handleCancel}\n  //       modalRender={(modal) => (\n  //         <Draggable\n  //           disabled={disabled}\n  //           bounds={bounds}\n  //           onStart={(event, uiData) => onStart(event, uiData)}\n  //         >\n  //           <div ref={draggleRef}>{modal}</div>\n  //         </Draggable>\n  //       )}\n  //     >\n  //       {/* 登录 */}\n  //       {loginState === 'default' ? defaultWrapperContent : null}\n  //       {loginState === 'phone' ? phoneLogin() : undefined}\n  //       {loginState === 'email' ? phoneLogin('email') : undefined}\n  //       {loginState === 'register' ? phoneLogin('register') : undefined}\n  //     </Modal>\n  //   </Draggable>\n  // )\n}\n\n_s(Login, \"LNOi0v2JDfAKLBpVLeYk9WwJWio=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Login;\nexport default _c2 = /*#__PURE__*/memo(Login);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/macos/Desktop/react-music-webapp/src/application/Login/index.js"],"names":["React","memo","useRef","useState","useEffect","Button","message","Modal","Draggable","shallowEqual","useDispatch","useSelector","LoginIcon","Container","LoginBottom","LoginWrapper","LoginIconWrapper","CSSTransition","imgSrc","Login","disabled","setDisabled","loginState","setLoginState","bounds","setBounds","left","top","bottom","right","draggleRef","show","setShow","dispatch","isVisible","state","getIn","handleCancel","e","onStart","event","uiData","console","log","clientWidth","clientHeight","window","document","documentElement","targetRect","current","getBoundingClientRect","x","y","handleLogin","loginMode","width","height"],"mappings":"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","sourcesContent":["import React, { memo, useRef, useState, useEffect } from 'react'\nimport { Button, message, Modal } from 'antd'\nimport Draggable from 'react-draggable'\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux'\n// import { changeIsVisible } from './store'\nimport LoginIcon from '../../components/theme-controls-icon/login/index'\nimport { Container, LoginBottom, LoginWrapper, LoginIconWrapper } from './style'\n// import ThemeLoginForm from '../../components/'\nimport { CSSTransition } from 'react-transition-group';\nimport imgSrc from './netease-music.png'\n//实现扫码，用户名，邮箱登录\n\n\n/**\n * 登录页面(模态框)\n */\nfunction Login() {\n  // state/props\n  const [disabled, setDisabled] = useState(true)\n  const [loginState, setLoginState] = useState('default') // 默认状态显示\n  const [bounds, setBounds] = useState({ left: 0, top: 0, bottom: 0, right: 0 })\n  const draggleRef = useRef()\n  const [show, setShow] = useState(false);\n  // redux\n  const dispatch = useDispatch()\n  const { isVisible } = useSelector(\n    (state) => ({\n      isVisible: state.getIn(['loginState', 'isVisible']),\n    }),\n    shallowEqual\n  )\n\n  useEffect(() => {\n    setShow(true);\n  }, []);\n\n  // 取消\n  const handleCancel = (e) => {\n    //   // 关闭模态框\n    //   dispatch(changeIsVisible(false))\n    //   // 延迟返回初始化状态\n    //   setTimeout(() => {\n    //     setLoginState('default')\n    //   }, 100)\n  }\n  // 拖拽\n  const onStart = (event, uiData) => {\n    console.log('---->拖拽')\n    const { clientWidth, clientHeight } = window?.document?.documentElement\n    const targetRect = draggleRef?.current?.getBoundingClientRect()\n    setBounds({\n      left: -targetRect?.left + uiData?.x,\n      right: clientWidth - (targetRect?.right - uiData?.x),\n      top: -targetRect?.top + uiData?.y,\n      bottom: clientHeight - (targetRect?.bottom - uiData?.y),\n    })\n  }\n\n  // other handle\n  const handleLogin = (loginMode) => {\n    switch (loginMode) {\n      case 'phone':\n        setLoginState('phone')\n        break\n      case 'email':\n        setLoginState('email')\n        break\n      case 'register':\n        setLoginState('register')\n        break\n      default:\n    }\n  }\n\n\n\n  return (\n    <CSSTransition\n      in={show}\n      timeout={300}\n      appear={true}\n      classNames=\"fly\"\n      unmountOnExit\n    >\n      <Container>\n        <LoginIconWrapper>\n          <img src={imgSrc} style={{ width: '100px', height: '100px', }} alt=\"\" />\n        </LoginIconWrapper>\n        <LoginWrapper>\n\n          <div className=\"login-bg\"></div>\n          <Button\n            type=\"primary\"\n            shape=\"round\"\n            \n            onClick={() => handleLogin('phone')}\n          >\n            手机号登录\n          </Button>\n          <Button\n            type=\"primary\"\n            shape=\"round\"\n            \n            onClick={() => handleLogin('email')}\n          >\n            网易云邮箱登录\n          </Button>\n          <Button\n            type=\"primary\"\n            shape=\"round\"\n          \n            onClick={() => handleLogin('qr')}\n          >\n            app扫码登录\n          </Button>\n\n        </LoginWrapper>\n        <LoginBottom>\n            <Button\n              type=\"ghost\"\n              onClick={() => handleLogin('register')}\n              shape=\"round\"\n              className=\"gap\"\n            >\n              注册\n            </Button>\n        </LoginBottom>\n      </Container>\n    </CSSTransition>\n  )\n  // return (\n  //   <Draggable>\n  //     <Modal\n  //       centered\n  //       footer={null}\n  //       title={\n  //         <div\n  //           style={{\n  //             width: '100%',\n  //             cursor: 'move',\n  //           }}\n  //           onMouseOver={() => {\n  //             if (disabled) {\n  //               setDisabled(false)\n  //             }\n  //           }}\n  //           onMouseOut={() => {\n  //             setDisabled(true)\n  //           }}\n  //           // fix eslintjsx-a11y/mouse-events-have-key-events\n  //           // https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/master/docs/rules/mouse-events-have-key-events.md\n  //           onFocus={() => {}}\n  //           onBlur={() => {}}\n  //           // end\n  //         >\n  //           {loginState === 'register' ? '注册' : '登录'}\n  //         </div>\n  //       }\n  //       visible={isVisible}\n  //       onCancel={handleCancel}\n  //       modalRender={(modal) => (\n  //         <Draggable\n  //           disabled={disabled}\n  //           bounds={bounds}\n  //           onStart={(event, uiData) => onStart(event, uiData)}\n  //         >\n  //           <div ref={draggleRef}>{modal}</div>\n  //         </Draggable>\n  //       )}\n  //     >\n  //       {/* 登录 */}\n  //       {loginState === 'default' ? defaultWrapperContent : null}\n  //       {loginState === 'phone' ? phoneLogin() : undefined}\n  //       {loginState === 'email' ? phoneLogin('email') : undefined}\n  //       {loginState === 'register' ? phoneLogin('register') : undefined}\n  //     </Modal>\n  //   </Draggable>\n  // )\n}\n\nexport default memo(Login)\n"]},"metadata":{},"sourceType":"module"}