{"ast":null,"code":"import { fromJS } from 'immutable';\nimport { getRankListRequest } from '../../../api/request'; //context\n\nexport const CHANGE_RANK_LIST = 'rank/CHANGE_RANK_LIST';\nexport const CHANGE_LOADING = 'rank/CHANGE_LOADING';\nexport const defaultState = fromJS({\n  rankList: [],\n  loading: true\n}); //reducer (负责更新视图)\n\nconst reducer = (state = defaultState, action) => {\n  switch (action.type) {\n    case CHANGE_RANK_LIST:\n      return state.set('rankList', action.data);\n\n    case CHANGE_LOADING:\n      return state.set('loading', action.data);\n\n    default:\n      return state;\n  }\n}; //action\n\n\nconst changeRankList = data => ({\n  type: CHANGE_RANK_LIST,\n  data: fromJS(data)\n});\n\nconst changeLoading = data => ({\n  type: CHANGE_LOADING,\n  data: fromJS(data)\n});\n\nexport const getRankList = () => {\n  return dispatch => {\n    getRankListRequest().then(data => {\n      let list = data && data.list;\n      dispatch(changeRankList(list));\n      dispatch(changeLoading(false));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport { reducer };","map":{"version":3,"sources":["/Users/macos/Desktop/react-music-webapp/src/application/Rank/store/index.js"],"names":["fromJS","getRankListRequest","CHANGE_RANK_LIST","CHANGE_LOADING","defaultState","rankList","loading","reducer","state","action","type","set","data","changeRankList","changeLoading","getRankList","dispatch","then","list","catch","err","console","log"],"mappings":"AAAA,SACIA,MADJ,QAEO,WAFP;AAGA,SACIC,kBADJ,QAEO,sBAFP,C,CAIA;;AACA,OAAO,MAAMC,gBAAgB,GAAG,uBAAzB;AAEP,OAAO,MAAMC,cAAc,GAAG,qBAAvB;AAGP,OAAO,MAAMC,YAAY,GAAGJ,MAAM,CAAC;AAC/BK,EAAAA,QAAQ,EAAE,EADqB;AAE/BC,EAAAA,OAAO,EAAE;AAFsB,CAAD,CAA3B,C,CAKP;;AACA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAAGJ,YAAT,EAAuBK,MAAvB,KAAkC;AAC9C,UAAOA,MAAM,CAACC,IAAd;AACI,SAAKR,gBAAL;AACI,aAAOM,KAAK,CAACG,GAAN,CAAU,UAAV,EAAsBF,MAAM,CAACG,IAA7B,CAAP;;AACJ,SAAKT,cAAL;AACI,aAAOK,KAAK,CAACG,GAAN,CAAU,SAAV,EAAqBF,MAAM,CAACG,IAA5B,CAAP;;AACJ;AACI,aAAOJ,KAAP;AANR;AAQH,CATD,C,CAWA;;;AACA,MAAMK,cAAc,GAAID,IAAD,KAAW;AAC9BF,EAAAA,IAAI,EAAER,gBADwB;AAE9BU,EAAAA,IAAI,EAAEZ,MAAM,CAAEY,IAAF;AAFkB,CAAX,CAAvB;;AAIA,MAAME,aAAa,GAAIF,IAAD,KAAW;AAC7BF,EAAAA,IAAI,EAAEP,cADuB;AAE7BS,EAAAA,IAAI,EAAEZ,MAAM,CAACY,IAAD;AAFiB,CAAX,CAAtB;;AAKA,OAAO,MAAMG,WAAW,GAAG,MAAM;AAC7B,SAAOC,QAAQ,IAAI;AACff,IAAAA,kBAAkB,GAAGgB,IAArB,CAA0BL,IAAI,IAAI;AAC9B,UAAIM,IAAI,GAAGN,IAAI,IAAIA,IAAI,CAACM,IAAxB;AACAF,MAAAA,QAAQ,CAACH,cAAc,CAACK,IAAD,CAAf,CAAR;AACAF,MAAAA,QAAQ,CAACF,aAAa,CAAC,KAAD,CAAd,CAAR;AACH,KAJD,EAIGK,KAJH,CAISC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAND;AAOH,GARD;AASH,CAVM;AAYP,SACIb,OADJ","sourcesContent":["import {\n    fromJS\n} from 'immutable'\nimport {\n    getRankListRequest\n} from '../../../api/request'\n\n//context\nexport const CHANGE_RANK_LIST = 'rank/CHANGE_RANK_LIST';\n\nexport const CHANGE_LOADING = 'rank/CHANGE_LOADING';\n\n\nexport const defaultState = fromJS({\n    rankList: [],\n    loading: true\n})\n\n//reducer (负责更新视图)\nconst reducer = (state = defaultState, action) => {\n    switch(action.type) {\n        case CHANGE_RANK_LIST:\n            return state.set('rankList', action.data);\n        case CHANGE_LOADING:\n            return state.set('loading', action.data);\n        default:\n            return state\n    }\n}\n\n//action\nconst changeRankList = (data) => ({\n    type: CHANGE_RANK_LIST,\n    data: fromJS (data)\n})\nconst changeLoading = (data) => ({\n    type: CHANGE_LOADING,\n    data: fromJS(data)\n}) \n\nexport const getRankList = () => {\n    return dispatch => {\n        getRankListRequest().then(data => {\n            let list = data && data.list;\n            dispatch(changeRankList(list));\n            dispatch(changeLoading(false))\n        }).catch(err => {\n            console.log(err)\n        })\n    }\n}\n\nexport {\n    reducer\n}\n\n"]},"metadata":{},"sourceType":"module"}